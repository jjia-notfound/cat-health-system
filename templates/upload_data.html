{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <h1 class="text-center mb-4">üìä ‰∏ä‰º† {{ cat_name }} ÁöÑÊï∞ÊçÆ</h1>
        
        <div class="card">
            <div class="card-header">
                <h4>ÈÄâÊã©‰∏ä‰º†ÊñπÂºè</h4>
            </div>
            <div class="card-body">
                <!-- Êñá‰ª∂‰∏ä‰º† -->
                <h5>ÊñπÂºè1Ôºö‰∏ä‰º†CSVÊñá‰ª∂</h5>
                <form method="POST" enctype="multipart/form-data" onsubmit="return validateFile()">
                    <div class="mb-3">
                        <label for="file" class="form-label">ÈÄâÊã©CSVÊñá‰ª∂</label>
                        <input type="file" class="form-control" id="file" name="file" accept=".csv">
                        <div class="form-text">
                            Êñá‰ª∂Ê†ºÂºèÔºöCSVÊñá‰ª∂ÔºåÂåÖÂê´ÂàóÔºöDate, Water(ml), Food(g), Urination, Defecation, Vomiting, Diarrhea, Weight(kg)
                        </div>
                        <div class="alert alert-warning mt-2" id="fileAlert" style="display: none;">
                            ËØ∑ÂÖàÈÄâÊã©Êñá‰ª∂ÂÜçÁÇπÂáª‰∏ä‰º†ÔºÅ
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">‰∏ä‰º†Êñá‰ª∂</button>
                </form>
                
                <hr>
                
                <!-- ÊâãÂä®ËæìÂÖ• -->
                <h5>ÊñπÂºè2ÔºöÊâãÂä®ËæìÂÖ•Êï∞ÊçÆ</h5>
                <form method="POST">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="date" class="form-label">Êó•Êúü</label>
                                <input type="date" class="form-control" id="date" name="date" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="water" class="form-label">È•ÆÊ∞¥Èáè (ml)</label>
                                <input type="number" class="form-control" id="water" name="water" step="0.1" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="food" class="form-label">ËøõÈ£üÈáè (g)</label>
                                <input type="number" class="form-control" id="food" name="food" step="0.1" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="weight" class="form-label">‰ΩìÈáç (kg)</label>
                                <input type="number" class="form-control" id="weight" name="weight" step="0.1" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="urination" class="form-label">ÊéíÂ∞øÊ¨°Êï∞</label>
                                <input type="number" class="form-control" id="urination" name="urination" min="0" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="defecation" class="form-label">Êéí‰æøÊ¨°Êï∞</label>
                                <input type="number" class="form-control" id="defecation" name="defecation" min="0" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="vomiting" class="form-label">ÂëïÂêêÊ¨°Êï∞</label>
                                <input type="number" class="form-control" id="vomiting" name="vomiting" min="0" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="diarrhea" class="form-label">ËÖπÊ≥ªÊ¨°Êï∞</label>
                                <input type="number" class="form-control" id="diarrhea" name="diarrhea" min="0" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success">Ê∑ªÂä†ËÆ∞ÂΩï</button>
                        <a href="{{ url_for('cat_detail', cat_name=cat_name) }}" class="btn btn-secondary">ËøîÂõû</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function validateFile() {
    const fileInput = document.getElementById('file');
    const alertDiv = document.getElementById('fileAlert');
    
    if (!fileInput.files || fileInput.files.length === 0) {
        alertDiv.style.display = 'block';
        return false; // ÈòªÊ≠¢Ë°®ÂçïÊèê‰∫§
    }
    
    alertDiv.style.display = 'none';
    return true; // ÂÖÅËÆ∏Ë°®ÂçïÊèê‰∫§
}

// ÂΩìÈÄâÊã©Êñá‰ª∂Êó∂ÈöêËóèÊèêÈÜí
const fileInput = document.getElementById('file');
fileInput.addEventListener('change', function() {
    const alertDiv = document.getElementById('fileAlert');
    if (this.files && this.files.length > 0) {
        alertDiv.style.display = 'none';
    }
});
</script>
{% endblock %}