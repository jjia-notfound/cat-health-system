# 🐱 猫咪健康监测系统

## 项目简介

这是一个基于Flask的猫咪健康监测系统，通过分析猫咪的日常行为数据（饮水量、进食量、排泄频率等）来预测三种常见疾病的风险：

- 🏥 **慢性肾病 (CKD)**
- 🔥 **猫胰腺炎**
- 🐛 **猫肠道寄生虫感染**

## 功能特点

### ✅ 核心功能
- **猫咪档案管理**: 支持创建和管理猫咪档案
- **数据上传**: 支持CSV文件上传和手动数据录入
- **智能检测**: 使用机器学习算法分析疾病风险
- **检测记录**: 保存历史检测记录，支持清空
- **档案管理**: 支持删除猫咪档案和清空数据

### 📊 监测指标
- 饮水量 (ml/天)
- 进食量 (g/天)
- 排尿频率 (次/天)
- 排便频率 (次/天)
- 呕吐次数 (次/天)
- 腹泻次数 (次/天)
- 体重 (kg)

## 技术栈

- **Python 3.12**
- **Flask**: Web应用框架
- **Pandas**: 数据处理
- **Scikit-learn**: 机器学习
- **Bootstrap 5**: 前端UI框架
- **Jinja2**: 模板引擎

## 安装和运行

### 1. 环境准备

确保已安装Python 3.12，然后安装依赖：

```bash
pip install -r requirements.txt
```

### 2. 启动应用

```bash
python3 start.py
```

启动后，程序会自动检测端口占用情况：
- 如果8000端口被占用，会自动使用8001、8002等下一个可用端口
- 控制台会显示实际的访问地址，例如：`http://localhost:8001`
- 在浏览器中手动访问显示的地址即可

### 3. 文件结构

```
cat_health/
├── flask_app.py            # 主应用文件
├── cat_health_system_flask.py  # 核心系统类
├── start.py               # 一键启动脚本
├── requirements.txt       # 依赖包列表
├── README.md             # 项目说明
├── ckd.csv               # CKD疾病训练数据
├── normal.csv            # 正常猫咪训练数据
├── pancreatitis.csv      # 胰腺炎训练数据
├── parasite.csv          # 寄生虫感染训练数据
├── sample_data/          # 示例数据
│   ├── cat1.csv         # 示例1：正常猫咪
│   └── cat2.csv         # 示例2：CKD疾病猫咪
├── cat_data/            # 用户数据存储
│   ├── profiles/        # 猫咪档案
│   ├── records/         # 健康数据
│   ├── avatars/         # 猫咪头像
│   └── uploads/         # 上传文件
├── templates/           # HTML模板
└── static/             # 静态资源
```

## 使用指南

### 📱 快速开始

1. **创建猫咪档案**
   - 进入"猫咪管理"页面
   - 点击"创建猫咪"
   - 输入猫咪名字，可选上传头像

2. **上传数据**
   - 选择猫咪进入详情页面
   - 在"上传数据"标签页上传CSV文件或手动输入数据
   - 数据格式参考`sample_data/`中的示例文件

3. **健康检测**
   - 在"健康检测"页面选择猫咪
   - 点击"开始健康检测"
   - 查看疾病风险分析结果

4. **查看记录**
   - 在"检测记录"页面查看历史检测结果
   - 可清空单个猫咪的检测记录

### 📊 数据格式

CSV文件必须包含以下列：

```csv
Date,Water(ml),Food(g),Urination,Defecation,Vomiting,Diarrhea,Weight(kg)
```

### 🔍 疾病风险判断

- **高风险**: 疾病概率 ≥ 50%，建议及时就医
- **中等风险**: 疾病概率 30-50%，需要关注
- **低风险**: 疾病概率 < 30%，健康状况良好

## 示例数据

### 正常猫咪 (cat1.csv)
- 饮水量：180-220 ml/天
- 进食量：80-95 g/天
- 体重：4.45-4.52 kg
- 无明显症状

### CKD疾病猫咪 (cat2.csv)
- 饮水量：380-465 ml/天（明显增加）
- 进食量：41-52 g/天（明显减少）
- 体重：3.75-4.2 kg（持续下降）
- 排尿次数增多

## 注意事项

### ⚠️ 重要提醒
1. **医疗建议**: 本系统仅提供参考，不能替代专业兽医诊断
2. **数据质量**: 确保数据准确性和连续性
3. **定期检测**: 建议每周进行一次健康检测
4. **异常处理**: 发现高风险时及时联系兽医

### 📋 数据管理
- 最大支持10只猫咪档案
- 单个数据文件最大1GB
- 支持随时修改和删除数据
- 检测记录可清空

## 故障排除

### 常见问题

**Q: 应用无法启动**
A: 检查Python版本是否为3.12，确认所有依赖已安装

**Q: 数据上传失败**
A: 检查CSV格式是否正确，确认包含所有必需列

**Q: 检测结果异常**
A: 检查数据是否有异常值，确保数据量足够（建议至少7天数据）

**Q: 如何重置系统**
A: 删除`cat_data/`目录下的所有文件，系统会自动重新创建


## 技术支持

如有问题，请检查：
1. 确保所有CSV文件格式正确
2. 检查数据文件是否存在损坏

---

**免责声明**: 本系统仅供学习和参考使用，所有健康建议请以专业兽医诊断为准。
